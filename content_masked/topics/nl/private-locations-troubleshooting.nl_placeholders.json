{
  "[URL_BASE_TOPICS]": "/support/kb/",
  "[FRONTMATTER_TRANSLATIONKEY]": "https://www.uptrends.com/support/kb/synthetic-monitoring/checkpoints/private-locations/private-locations-troubleshooting",
  "[LINK_URL_1]": "#verify-private-location-installation",
  "[LINK_URL_2]": "#smoke-test-your-setup",
  "[LINK_URL_3]": "#how-to-troubleshoot",
  "[LINK_URL_4]": "{{< ref path=\"support/kb/synthetic-monitoring/checkpoints/private-locations/install-docker-private-checkpoints#installation-steps\" lang=\"nl\" >}}",
  "[LINK_URL_5]": "{{< ref path=\"support/kb/synthetic-monitoring/checkpoints/private-locations/install-docker-private-checkpoints#installation-script\" lang=\"nl\" >}}",
  "[LINK_URL_6]": "#managing-running-containers",
  "[LINK_URL_7]": "{{< ref path=\"support/kb/synthetic-monitoring/checkpoints/private-locations/private-checkpoints-update-containers\" lang=\"nl\" >}}",
  "[LINK_URL_8]": "{{< ref path=\"support/kb/synthetic-monitoring/checkpoints/private-locations/private-locations-data-protection\" lang=\"nl\" >}}",
  "[LINK_URL_9]": "#dns-issues",
  "[LINK_URL_10]": "{{< ref path=\"support/kb/synthetic-monitoring/checkpoints/private-locations/private-locations-how-to-use#disable-a-private-checkpoint\" lang=\"nl\" >}}",
  "[LINK_URL_11]": "{{< ref path=\"support/kb/synthetic-monitoring/checkpoints/private-locations/private-locations-checkpoint-health\" lang=\"nl\" >}}",
  "[LINK_URL_12]": "{{< ref path=\"/support/kb/synthetic-monitoring/checkpoints/private-locations/install-docker-private-checkpoints\" lang=\"nl\" >}}",
  "[LINK_URL_13]": "https://docs.docker.com/engine/manage-resources/pruning",
  "[LINK_URL_14]": "{{< ref path=\"contact\" lang=\"nl\" >}}",
  "[SHORTCODE_1]": "{{< callout >}}",
  "[SHORTCODE_2]": "{{< /callout >}}",
  "[SHORTCODE_3]": "{{< callout >}}",
  "[SHORTCODE_4]": "{{< /callout >}}",
  "[SHORTCODE_5]": "{{< AppElement type=\"buttonSecondary\" >}}",
  "[SHORTCODE_6]": "{{< /AppElement >}}",
  "[SHORTCODE_7]": "{{< AppElement type=\"buttonSecondary\" >}}",
  "[SHORTCODE_8]": "{{< /AppElement >}}",
  "[CODE_BLOCK_1]": "```Docker exec -i checkpoint powershell```",
  "[CODE_BLOCK_2]": "```Docker exec -i checkpoint cmd```",
  "[CODE_BLOCK_3]": "```winver : The term 'winver' is not recognized```",
  "[CODE_BLOCK_4]": "```yaml\nTransactionProcessor:\n    container_name: TransactionProcessor\n    image: uptrends.azurecr.io/win2022/transaction-processor\n    deploy:\n      restart_policy:\n        condition: always\n    volumes:\n      - .\\Certificates:C:\\Uptrends\\Certificates:ro\n    logging:\n      driver: local\n    environment:\n      - ServerId=\n      - Password=\n    dns:\n      - 1.2.3.4\n      - 2.3.4.5\n```",
  "[INLINE_CODE_1]": "`Get-WindowsFeature | Where-Object {$_. installstate -eq \"installed\"}`",
  "[INLINE_CODE_2]": "`. \n3. Controleer of deze lijst 'Containers' bevat.\n\nControleer ten tweede de uitvoer van de versie van Docker:\n1. Open een PowerShell-console in beheerdersmodus. \n2. Ga naar de map waar het docker-compose.yml bestand zich bevindt en voer de volgende opdracht uit `",
  "[INLINE_CODE_3]": "`Docker -v`",
  "[INLINE_CODE_4]": "`. \n3. Het resultaat zou iets als 'Docker version 23.0.3, build 3e7cbfd' moeten zijn.\n\nControleer ten derde de uitvoer van de versie van Docker Compose:\n1. Open een PowerShell-console in beheerdersmodus. \n2. Ga naar de map waar het bestand docker-compose.yml zich bevindt en voer de volgende opdracht uit `",
  "[INLINE_CODE_5]": "`Docker-compose -v`",
  "[INLINE_CODE_6]": "`. \n3. Het resultaat zou iets als 'Docker Compose version v2.17.2' moeten zijn.\n\nAls u denkt dat er iets niet in orde is, kunt u het installatiescript, install-checkpoint.ps1, raadplegen en handmatig de afzonderlijke onderdelen voor de bovenstaande componenten uitvoeren en de uitvoer bekijken.\n \n### Container images\nAls aan alle drie de bovenstaande vereisten is voldaan, begint het [installatiescript]([LINK_URL_5]) met het ophalen van de Uptrends-containerimages uit Azure. Deze images zijn groot omdat ze allemaal een gecomprimeerde installatie van Windows Server bevatten. Het downloaden kan minstens enkele minuten duren (20 minuten is gebruikelijk), afhankelijk van de netwerkdoorvoer. Delen van de images worden hergebruikt bij het updaten, zodat volgende downloads sneller zullen zijn. Zodra het downloaden is voltooid, kunt u dit verifiëren door het [uitvoeren]([LINK_URL_6]) van: `",
  "[INLINE_CODE_7]": "`docker images`",
  "[INLINE_CODE_8]": "` en u zult drie vermeldingen zien.\n\nHet ophalen van de images is afhankelijk van de interne werking van Docker en is een robuust proces dat het wegvallen van verbindingen aankan. Als het downloaden helemaal mislukt, is de meest waarschijnlijke oorzaak een (lokale) firewall die verhindert dat Docker toegang krijgt tot de Azure Container Repository via azurecr.io, gehost door Microsoft.\n\nOm te authenticeren bij het ophalen van de images, registreert het installatiescript inloggegevens via Docker-login. In geval van problemen met authenticatie kunt u naar de installatiemap navigeren (de map die install-checkpoint.ps1 bevat) en deze opdrachten in powershell uitvoeren om:\n\nBestaande inloggegevens te wissen, gebruik de volgende opdracht:\n`",
  "[INLINE_CODE_9]": "`Docker logout`",
  "[INLINE_CODE_10]": "`\n\nregistry-login.ps1 opnieuw uit te voeren en de uitvoer van deze opdracht te bekijken, gebruik de volgende opdracht:\n`",
  "[INLINE_CODE_11]": "`.\\registry-login.ps1`",
  "[INLINE_CODE_12]": "`\n\n### Automatisch uitvoeren en automatische updates\nOm de containercontrolestations draaiende te houden, wordt er een geplande taak gecreëerd om het script start-containers.ps1 uit te voeren na het opstarten van de server. Om de Docker-images van het containercontrolestation [up-to-date]([LINK_URL_7]) te houden wordt er een tweede Scheduled Task gecreëerd om regelmatig te controleren op image-updates. Controleer de uitvoer van de powershell-opdracht `",
  "[INLINE_CODE_13]": "`Get-ScheduledTask`",
  "[INLINE_CODE_14]": "` om te verifiëren of deze taken bestaan. Ze heten 'Start Checkpoint Containers' en 'Update Checkpoint Images'. \n\nU kunt de Windows Scheduled Task-gebruikersinterface gebruiken om de taken verder te onderzoeken, de historie en fouten uit te voeren of de taak handmatig te activeren om problemen op te lossen. Nogmaals, gebruik in geval van problemen het installatiescript (install-checkpoint.ps1) om dit deel van de installatie indien nodig handmatig opnieuw uit te voeren.\n\n### Configuratie\nAlle serverspecifieke configuraties bevinden zich in het configuratiebestand Docker-compose.yml. Dit bestand bevat alle drie de containerimages en hun individuele instellingen. Dit configuratiebestand wordt vooraf gevuld met alle benodigde instellingen wanneer het wordt gedownload. Het belangrijkste is de combinatie `",
  "[INLINE_CODE_15]": "`ServerId/Password`",
  "[INLINE_CODE_16]": "` die moet worden geconfigureerd voor alle drie de containerimages die in het bestand worden vermeld (wat betekent dat dezelfde combinatie van inloggegevens driemaal in het yml-bestand zal voorkomen met dezelfde waarden). \n\n[SHORTCODE_1] De *ServerId* en *Password* zijn uniek voor het containercontrolestation. Meerdere containercontrolestationservers mogen nooit dezelfde *ServerId* hebben.\n[SHORTCODE_2] \n\nHet Docker Compose-bestand kan worden gebruikt voor het configureren van controlestationspecifieke [gegevensbescherming]([LINK_URL_8]), beleid en [omgevingsspecifieke DNS-regels]([LINK_URL_9]).\n \n### Huidige status\nNa installatie worden de containers voor alle drie de images gestart en deze containers zullen naar verwachting altijd draaien. U kunt hun status verifiëren met de opdracht `",
  "[INLINE_CODE_17]": "`docker ps`",
  "[INLINE_CODE_18]": "` en in de meest rechtse kolom is te zien of de containers inderdaad actief zijn. Gebruik in geval van problemen deze opdrachten om logbestanden te verkrijgen voor verdere diagnose:\n\n- Krijg de huidige status voor alle containers\n`",
  "[INLINE_CODE_19]": "`Docker ps`",
  "[INLINE_CODE_20]": "`\n\n- Krijg de logs voor de controlestation Agent-container en schrijf naar bestand\n`",
  "[INLINE_CODE_21]": "`Docker logs Checkpoint | Out-File Docker_CS.txt`",
  "[INLINE_CODE_22]": "`\n\n- Krijg de logs voor de transactieprocessorcontainer en schrijf naar bestand\n`",
  "[INLINE_CODE_23]": "`Docker logs TransactionProcessor | Out-File Docker_TP.txt`",
  "[INLINE_CODE_24]": "`\n\n- U kunt ook gecombineerde logs voor alle containers krijgen\n`",
  "[INLINE_CODE_25]": "`Docker-compose logs -t -n 5000 | Out-File Docker.txt`",
  "[INLINE_CODE_26]": "`\n\n## Een smoke test uitvoeren op uw set-up\n\nZodra de containercontrolestations zijn geïnstalleerd, zijn deze direct klaar om metingen uit te voeren. Uptrends' interne processen zullen automatisch de onderhoudsstatus van een containercontrolestation wijzigen op basis van de status ervan. Een gezond controlestation wordt omgeschakeld naar actief, een ongezond controlestation naar onderhoud. \n\nControlestations updaten hun status elke minuut. U kunt controlestations ook activeren of [deactiveren]([LINK_URL_10]) (bijvoorbeeld bij het uitvoeren van onderhoud of het testen van de set-up ervan) vanuit de gebruikersinterface van persoonlijke locaties in de Uptrends-webapplicatie. De standaardstatus is 'ingeschakeld'. \n\nOm een smoke test op een containercontrolestation uit te voeren is het gebruik van de knop [SHORTCODE_5] Test starten [SHORTCODE_6] het handigst. Idealiter zou u dit doen voor elk controleregeltype dat u erop wilt uitvoeren. \n\nU kunt de [Controlestationstatus]([LINK_URL_11]) van de persoonlijke locaties gebruiken om de status van ongezonde controlestations te diagnosticeren. \n\nHoud er rekening mee dat alle metingen 'binnen' een container worden uitgevoerd. U zult niet zien dat er een browser wordt gestart op de hostcomputer wanneer u de knop [SHORTCODE_7] Test starten [SHORTCODE_8] gebruikt voor een FPC of transactie.\n\nHoud er ook rekening mee dat wanneer u een controlestation toevoegt aan een bestaande persoonlijke locatie die deel uitmaakt van de controlestationselectie van actieve controleregels, het nieuwe controlestation metingen zal gaan uitvoeren nadat de installatie is voltooid. Als dat ongewenst is (bijvoorbeeld als u eerst wilt testen), moet u het controlestation in het gedeelte persoonlijke locaties van Uptrends uitschakelen.\n\n## Hoe u problemen oplost\n\n### Stop, start of herstart een set containers\nHerstart containers die zijn gekoppeld aan het bestand Docker-compose.yaml in de huidige directory. Dit is vaak de map C:\\uptrends\\ :\n\n1. Open een PowerShell-console in beheerdersmodus. \n2. Ga naar de map waar het bestand docker-compose.yml zich bevindt en voer een of meerdere van de volgende opdrachten uit.\n- Om te starten typt u `",
  "[INLINE_CODE_27]": "` op de opdrachtregel. \n- Om te stoppen typt u `",
  "[INLINE_CODE_28]": "` op de opdrachtregel. \n- Om te herstarten typt u `",
  "[INLINE_CODE_29]": "` op de opdrachtregel.\n\n\n[SHORTCODE_3] **Tip** Gebruik de Docker-help. Over elk van de opdrachten kunt u meer te weten komen door de opdracht *docker - -help* te gebruiken. Met deze opdracht worden alle opdrachten weergegeven met algemene hulp voor alle verschillende opdrachten. U kunt ook om hulp vragen over een bepaalde opdracht door *docker image - -help* te typen.[SHORTCODE_4]\n\n\n### Actieve containers beheren\nOm een lijst met actieve containers te krijgen, voert u de opdracht `",
  "[INLINE_CODE_30]": "`docker ps`",
  "[INLINE_CODE_31]": "` uit. Hier wordt een containerId vermeld die kan worden gebruikt in andere opdrachten met betrekking tot deze container. \n\nOm een lijst met alle lokale images te krijgen, voert u de opdracht `",
  "[INLINE_CODE_32]": "`docker images`",
  "[INLINE_CODE_33]": "` uit. Let op het meervoud images, alle opdrachten die op een image zijn gericht, worden uitgevoerd met image (enkelvoud).\n\nImages kunnen behoorlijk groot worden, om wat ruimte vrij te maken kunt u `",
  "[INLINE_CODE_34]": "`docker image prune`",
  "[INLINE_CODE_35]": "` gebruiken om images te verwijderen die niet langer door actieve containers worden gebruikt. Of gebruik `",
  "[INLINE_CODE_36]": "`docker image rm <containerid>`",
  "[INLINE_CODE_37]": "` om een specifieke container te verwijderen.\n\n### Ongebruikte Docker-objecten verwijderen\n\nHet [Uptrends-installatiescript voor Persoonlijke locaties]([LINK_URL_12]) bevat geen set-up voor het automatisch opschonen van ongebruikte Docker-objecten. Om ongebruikte Docker-objecten te verwijderen raadpleegt u de (Engelstalige) documentatie [Prune unused Docker objects]([LINK_URL_13]). Als u andere platforms gebruikt, zoals Kubernetes, raadpleeg dan de officiële documentatie daarvan.\n\n### Cmd/shell-toegang verkrijgen binnen een container\nVoer deze opdracht uit om een powershell- of cmd-proces binnen de container te starten. Dit kan worden gebruikt om snel het bestandssysteem binnen de containers te lezen. Gebruik de opdracht [CODE_BLOCK_1] of [CODE_BLOCK_2].\n\nWeet u niet zeker of u zich binnen of buiten een container bevindt? Typ `",
  "[INLINE_CODE_38]": "`winver`",
  "[INLINE_CODE_39]": "` in de Windows-opdrachtprompt. Als u zich in een container bevindt, ziet het er zo uit: \n\n[CODE_BLOCK_3] \n\nAls u zich op de host bevindt, wordt de pop-up **Over Windows** weergegeven.\nAls u de powershell- of cmd-sessie in de container wilt afsluiten en terug wilt gaan naar de host, gebruikt u Ctrl+C.\n\n### Loguitvoer lezen\n\n1. Open een PowerShell-console in beheerdersmodus. \n2. Ga naar de map waar het bestand docker-compose.yml zich bevindt en voer een van de volgende opdrachten uit.\n- Loguitvoer, typ `",
  "[INLINE_CODE_40]": "` op de opdrachtregel. \n- Of als u dit naar een bestand containerlogs.log wilt uitvoeren, typt u `",
  "[INLINE_CODE_41]": "`Docker-compose logs -t -n 5000 > containerlogs.log`",
  "[INLINE_CODE_42]": "`.\n\n### Netwerk\nBij het opstarten zal Docker op de host een virtueel netwerk creëren waaraan de containers zijn gekoppeld en een IP-adres krijgen. \nU kunt bestaande netwerken in powershell bekijken met `",
  "[INLINE_CODE_43]": "`docker network ls`",
  "[INLINE_CODE_44]": "` en een specifiek netwerk met `",
  "[INLINE_CODE_45]": "`docker network inspect <<network name>>`",
  "[INLINE_CODE_46]": "`. Om het netwerk te vinden waarin een container zich bevindt, gebruikt u `",
  "[INLINE_CODE_47]": "`docker inspect <<container name>>`",
  "[INLINE_CODE_48]": "` (en `",
  "[INLINE_CODE_49]": "`docker ps`",
  "[INLINE_CODE_50]": "` om containernamen te vinden).\n\nAlle drie de Uptrends Docker-containers (Checkpoint, CheckpointRelay, TransactionProcessor) moeten verbinding kunnen maken met Uptrends via probemaster1.uptrends.com en probemaster2.uptrends.com. Zowel de Checkpoint- als de CheckpointRelay-containers moeten verbinding kunnen maken met de te testen applicaties van de klant.\n\n### DNS-problemen\n\nEen veel voorkomende oorzaak van verbindingsproblemen is het resolven van DNS. Voor het oplossen van problemen kunt u deze stappen volgen:\n\n1. Op de host zou `",
  "[INLINE_CODE_51]": "`nslookup probemaster1.uptrends.com`",
  "[INLINE_CODE_52]": "` 95.211.70.204 moeten retourneren. Als dit niet het geval is, kunnen de containers geen verbinding maken met Uptrends.\n\n2. Gegeven dat de containers actief zijn (controleer dit met `",
  "[INLINE_CODE_53]": "`docker ps`",
  "[INLINE_CODE_54]": "`), voer dan in een powershell-sessie een container in: `",
  "[INLINE_CODE_55]": "`docker exec -i Checkpoint powershell.exe`",
  "[INLINE_CODE_56]": "`.\n\n3. Eenmaal in de container zou `",
  "[INLINE_CODE_57]": "`nslookup probemaster1.uptrends.com`",
  "[INLINE_CODE_58]": "` opnieuw 95.211.70.204 moeten retourneren. Als dat lukt, moet de container het Uptrends-cloudplatform kunnen bereiken.\n\n4. Probeer hetzelfde voor een hostnaam van een interne applicatie, zoals `",
  "[INLINE_CODE_59]": "`nslookup <<name application>>`",
  "[INLINE_CODE_60]": "` en verifieer het geretourneerde IP-adres. Als er een time-out optreedt, is de applicatie niet bereikbaar vanaf de container (en kan deze dus niet worden gemonitord).\n\nAls een van deze stappen mislukt, kunt u het volgende proberen:\n\n- Vergelijk ipconfig vanaf de host en vanuit een container (`",
  "[INLINE_CODE_61]": "`docker exec -i Checkpoint powershell.exe`",
  "[INLINE_CODE_62]": "` om een powershell-sessie binnen de Checkpoint-container te krijgen) en verifieer de geconfigureerde DNS-server(s).\n\nProbeer een publieke DNS zoals 8.8.8.8 (Google) op te geven wanneer u een nslookup als volgt uitvoert: `",
  "[INLINE_CODE_63]": "`nslookup probemaster1.uptrends.com 8.8.8.8`"
}